
📖[プロを目指す人のためのRuby入門［改訂2版］ 言語仕様からテスト駆動開発・デバッグ技法まで](https://gihyo.jp/book/2021/978-4-297-12437-3)

8章。モジュールについての章。ハンズオンは文字色変更プログラム

#### モジュールの概要

- モジュールの用途  
  モジュールは、
  - 継承を使わずにクラスにインスタンスメソッドを追加、上書きする（ミックスイン）
  - 複数のクラスに対して共通の得意メソッドを追加
  - クラス名や定数名の衝突を防ぐために名前空間を作る
  - 関数的メソッドを定義する
  - シングルトンオブジェクトのようにお使って設定値などを保持する
  
  というような用途で使われる。

- モジュールの定義  
  ```ruby
  module モジュール名
    # モジュールの定義
  end
  ```
  で定義する。  
  モジュールは、①インスタンスを作成することはできない、②他のモジュールやクラスを継承することはできない、といった特徴がある。  

#### モジュールを利用したメソッド定義（includeとextend）

- モジュールをクラスにincludeする  
  共通している処理はあるが、継承の関係が成り立たないため継承は使えない、という時にモジュールの使用が選択肢に挙がる。  
  モジュールに共通の処理を定義し、クラスでそのモジュールをincludeすると、モジュールで定義したメソッドがインスタンスメソッドとして呼び出せるようになる。  
  モジュールをクラスにincludeして機能を追加することをミックスインという。  
  ミックスイン先のクラスは基本的にどんなクラスでも構わない。  
  一つのクラスに複数のモジュールをミックスインすることもできる。  
  モジュール側で定義したメソッドはpublicになるが、モジュール側でprivateにしておけばinclude先のクラスでもprivateとして扱われる。  

- include先のメソッドを使うモジュール  
  Rubyは「メソッドを実行する瞬間にそのメソッドが呼び出せればいい」という考え方でプログラムが書けるので、include先に定義されているメソッドを使ったモジュールも定義できる。  
  モジュールのメソッドを実行する際の`self`はinclude先のクラスのインスタンスになる。  

- モジュールをextendする  
  extendを使ってモジュールのメソッドをクラスに追加すると、モジュール内のメソッドをそのクラスの特異メソッドにすることができる。  
  また、`クラス名.include`や`クラス名.extend`の形でモジュールを呼び出すこともできる。  
