
📖[プロを目指す人のためのRuby入門［改訂2版］ 言語仕様からテスト駆動開発・デバッグ技法まで](https://gihyo.jp/book/2021/978-4-297-12437-3)

#### `Proc`オブジェクト（つづき）

- `Proc`オブジェクトをブロックの代わりに渡す  
  `Proc`オブジェクトはブロックと同じ処理のかたまりを表しているが、ブロックとは異なりオブジェクトとして扱うことができる。  
  なので、変数に入れて別のメソッドに渡したり、`Proc`オブジェクトに対してメソッドを呼び出したりできる。  
  ブロックを引数として受け取ったとき、ブロックの引数に`class`を使うと`Proc`クラスのinスタンであることがわかる。  
  ブロックの代わりに`Proc`オブジェクトをメソッドの引数として渡すというテクニックもある。  
  `Proc`オブジェクトをブロックの代わりに渡すときは`&`を手前につけないと、ブロックではなく普通の引数が渡されたと見なされる。  

- `Proc`オブジェクトを普通の引数として渡す  
  メソッド定義で、ブロックではなく`Proc`オブジェクトを普通の引数として受け取る時は、`&`をつけなくても実行される。  
  メソッドが受け取れるブロックの数は最大で1つだが、`Proc`オブジェクトは文字列や数値と同じだたのオブジェクトなので、引数として渡す分には制限はない。  
  また、引数として3つの`Proc`オブジェクトを受け取るようにメソッドを定義すれば、３つの`Proc`オブジェクトを引数として渡すこともできる。  

- `Proc.new`とラムダの違い  
  `Proc`オブジェクトは、`proc`メソッドや`Proc.new`以外にも、
  ```ruby
  ->(a, b) { a + b }
  lambda { |a, b| a + b }
  ```
  といった構文やメソッドでも作ることができる。  
  どのやり方でも`Proc`オブジェクトが作成されるが、`proc`メソッドや`Proc.new`のやり方と`->`や`lambda`では振る舞いが異なる。  
  `->`はラムダリテラルで、ラムダを作るための記号。  
  引数の`()`は省略可能で、引数がなければ`{}`以外はすべて省略できる。  
  `{}`のかわりに`do...end`を使うこともできる。  
  ラムダは`Proc.new`よりも引数のチェックが厳密になるので、引数の数に過不足があるとエラーが発生する。  

- `Proc.new`かラムダかを判断する`lambda?`メソッド  
  `Proc`クラスのインスタンスが`Proc.new`で作られたのかラムダとしてつくられたのかを判断するときは`lambda?`メソッドを使う。  
  ラムダだったらtrueが返る。

次、ハンズオン。キリがいいのでここまで。