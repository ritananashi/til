※スクール内timesの移植（2025/09/28）

dependabotの自動merge設定後はじめてきたdependabotのプルリクはdependabotのfetch-metadataのメジャーバージョンアップだったので自動merge対象じゃなかったでござるの巻  
https://note.com/ym202110/n/nfa9337b0beea  
ほとくとWSLが4GBくらいメモリ使っちゃうので1GBの使用制限をかけてみた  

- 学習時間：3h/13h/1098h
- 学習内容：楽天API検証

どうにもだるくてあんまり作業ができていない。むずかしいね。  
楽天APIの検証作業してました。どういうJSONが発行されるかは[楽天ウェブサービスAPI一覧](https://webservice.rakuten.co.jp/documentation)でテストフォームが公開されているので、これで確認できます。  
AmazonAPIはAmazonに諸々登録しないとテストさせてくれないけど楽天は登録なしでテストさせてくれるから助かるね。  
これで出力を確認しながら前に作った楽天APIの検証環境をいじってました。  
楽天APIをRailsで使うときは[rws-ruby-sdk](https://github.com/rakuten-ws/rws-ruby-sdk)という便利gemがあるので、これで商品価格ナビ製品検索APIを叩いたりなどしていました。  
`RakutenWebService::Ichiba::Product.search(keyword: 'Ruby')`で商品価格ナビ製品検索APIを叩けます。  
商品価格ナビ製品検索APIは結構メジャーな商品（というか楽天で検索したときに`同じ商品を安い順でみる`のリンクが出てる商品）しか引っ掛からないので、こっちで何も引っかからなかったら楽天市場商品検索APIに切り替えて検索するみたいにしたいなとしていました。  
メジャー商品は商品価格ナビ製品検索APIでショップの値段等を比べながら自分でショップが選べて、商品価格ナビ製品検索APIで出てこないなら（おそらく）一つのショップしかないのでそこに誘導…みたいな感じなら変なショップに引っ掛かる率は…下がるかなって…。  
ただ検索結果0でも`present?`が`true`になってるっぽい？のでこの辺確認していきます。  

ところで最近PCファンが爆音で、部屋にクーラーついてないけどそんなに発熱するか？と思ったのでちょっとタスクマネージャーとかを確認してみたら、Vmmem（WSLの仮想マシンのリソース使用状況を示すタスク）がメモリを4GBくらい使ってて、PC全体で10GBくらいメモリつかってる状態でした。わたしのPCはメモリ16GBなのでアカン。  
どうもこのVmmem、仮想メモリを積極的には消さない様で、たくさんのメモリを使い続けてしまうようです。  
というわけで、.wslconfigというファイルを作成してWSLが使用するメモリの上限を1GBに制限しました。  
今のところ、1070MBくらいで落ち着いており、これより上がることはありませんでした。  
これより下げるとWSLが使用できなくなるっぽいので、1GBの制限で大丈夫かなと思います。  
参考：  
https://note.com/ym202110/n/nfa9337b0beea  
https://qiita.com/JonyTask/items/faf2e751152562bcaf69  

