※スクール内timesの移植（2025/09/28）

- 学習時間：5h/25h30min/1085h
- 学習内容：いいね順ソート実装 + バグ修正

いいね順ソート実装しました。  
`counter_cache`でいいね数を保存しておくカラムを追加して、あとはscope作ってcase文で条件分岐するようにしたりなどしておしまい！です。こっちのほうがらくだった。  
送られてくるparamsが何かで分岐するようにしてます。  
いいね順のソートはレビュー一覧を実装している部分のみに使う予定ですが、reviewだけじゃなくてproductの方でもレビュー一覧を使っているので、ソート関係のscopeやメソッドはconsernでモジュール化して両方のモデル・コントローラーで使えるようにしました。  
というわけで良いね順ソートおしまいです。  

あとは、やま さかなさんからのフィードバックでバグ報告をいただいたので修正してました。  
未ログイン時にいいねボタンを押すとログイン画面に遷移する…ようにしていたのですが、スケルトンスクリーンを実装したときにレビュー一覧とかを全部Turbo_frameの中に入れたので、いいねボタン（リンク）をクリックするとTrubo_frame外のログイン画面に遷移しようとして`Content missing`になっちゃうバグでした。`Content missing`の時点で察してた。  
Trubo_frameは、内部にあるリンクのターゲットをぜんぶ同じTrubo_frameにしてしまうので、同じTrubo_frameがないページに遷移しようとするとこれがでます。  
なので、リンクのターゲットをtrubo_frame外にする`_top`を指定して解決です。  
同じ実装してたブックマークボタンの方も修正しておきました。  
trubo_frameを使うときは、trubo_frame内のリンクの先にtrubo_frameがあるかないかを気にしないといけないのでちょっと大変です。ウッカリ考慮し忘れで`Content missing`はかなりよくあるので気を付けていきたいですね。  

