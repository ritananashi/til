※スクール内timesの移植（2025/09/16）


- 学習時間：5h30min/34h30min/820h30min
- 学習内容：卒制
  

MVPリリースに向けて、自分が把握している範囲のインクの情報を入れようとスプレッドシートに情報まとめてました。

テーブル設計でメーカー情報が入る`Brands`とインクの情報が入る`Products`を分けているので、まずは把握している範囲のメーカー情報を調べてました。

国内三大ブランドが`PILOT`、`セーラー万年筆`、`プラチナ万年筆`だと思うのですが、意外とセーラー万年筆以外公式オンラインショップ持ってなくてびっくりしてました。

難しいのが海外メーカーで、`本国の公式サイト`、`日本公式代理店の公式サイト`、`日本の正規輸入代理店の公式サイト`、`各文房具店などの取扱店`がそれぞれでサイトを作っているので、どれをリンクとしてつなげるか…でちょっと悩んだりしてました。

あと、ブランド名が一般名詞だと探せないね…どうしようかなって思います。

スプレッドシートの情報は、csvで保存して新しく作った`db/csv`配下に配置して、csvを読み込む記述を`seeds.rb`に書けばいいだけだったのでそんなに難しくなかったです。

しいていうなら、Ruby3.4.0から`csv`のサポートが標準ではなくなったらしく、Gemfileに`gem 'csv'`を追加する必要があったのと、flyctlで`rails db:seed`が使えなかったのが詰まりポイントでした。

`rails db:seed`が使えなかったことに関しては、[fly公式コミュニティ](https://community.fly.io/t/cant-seed-with-flyctl-ssh-console-c-app-bin-rails-db-seed/10443)では`bin/rails db:prepare`を実行するように書いていましたが、[公式ガイド](https://railsguides.jp/active_record_migrations.html#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E3%82%92%E6%BA%96%E5%82%99%E3%81%99%E3%82%8B)には
> データベースとテーブルが存在している状態でdb:prepareタスクを実行すると、以前読み込まれたseedデータや既存のseedファイルが変更または削除されていたとしても、seedデータの再読み込みは試みられません。seedデータを再読み込みするには、手動でbin/rails db:seedを実行してください。
  

との記述があって、私は現状すでに何個かデータを入れてしまっているので、これじゃダメなのでは？と思いました。

[Fly.ioでrails db:seedを実行する方法](https://qiita.com/lemonade_37/items/73dd5a060ad8ff953d10)という記事を見つけたので、これを参考にflyctlで`Rails.application.load_seed`をやったらDBにcsvファイル内のデータを保存することができました。

次はインクの情報を集めて`Product`のスプレッドシートを作ります。すでに数がかなりあるので気が遠くなってきましたがさくさく進めます。
  

ところで、今の本番環境のURLには旧サービス名が入っているので、先に独自ドメインを取得して旧サービス名を隠ぺいしてからMVPした方がいいかな？と思ったので、並行してこれもやろうと思います。

明日は定期お休み日なので、明後日からだけど…。
