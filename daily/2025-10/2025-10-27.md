※スクール内timesの移植（2025/11/18）

ActiveStorageでCounter_cacheどうやるんだ？  
カラム自体はreviewにつくればいいけどお…  
counter_cacheというよりカウントカラム作ってそこを増減させるみたいなやり方しかなさそう？  
コールバックで添付の数数えてカラムに保存とかかな…  

夕方にカジュアル面談だったのでそれまで準備したり土曜日の続きしたりしてた。  
カウントしてるところ`counter_cache`使おう～～～としたけど、ActiveStorageで`counter_cache`使うのどうすればいいんだろ…ってしてた。  
というのも、`counter_cache`は、`belongs_to`側のモデルに`counter_cache`を使うオプションを設定して、`has_many`側のテーブルに`counter_cache`用のカラムを作成する必要があるからです。  
ActiveStorageを使うときは、ファイルを添付したいモデルに`has_many_attached`を設定するので、`has_many_attached`を設定したモデルのテーブルにカウント用カラムを追加する…のはいいのですが、ActiveStorageのモデルファイルはないので`counter_cache`を使うオプションの設定をする場所がありません。  
軽く調べてみましたが、ActiveStorageでは上記のような`counter_cache`の一般的な使い方はできない？ようです。  
なので、`counter_cache`の代わりにファイル添付時にカウントを増減するカラムを作るしかないかなと思ってるところです。  
もうちょっと調べてみるけど、他の手段もなさそうな気がしてます。  

