※スクール内timesの移植（2025/09/29）

管理画面だし表示はこんなもんで良いか…  
[![Image from Gyazo](https://i.gyazo.com/bffa32fd4001413b82d74b46a7377f52.gif)](https://gyazo.com/bffa32fd4001413b82d74b46a7377f52)  

:v:   
[![Image from Gyazo](https://i.gyazo.com/c4e76dca784d72327a45214f269b34f6.gif)](https://gyazo.com/c4e76dca784d72327a45214f269b34f6)  

ひさびさに熱中してやってしまった。  
管理画面で楽天検索→選択した結果をフォームに反映して更新の実装してました。  
中身的にはStimulusで単純に、ラジオボタンのvalueに保存したい情報をカンマ区切りで入れとく→ラジオボタンにクリックイベントを設定して、Stimulusコントローラーの該当のメソッド内でvalueを`split(",")`で分解して配列化、フォームにIDふられてるので`getElemetById`で対象のフォーム探してvalueに入れたい値を配列からとってきて代入、です。  
検索と結果の画面表示は、`<ul>`までform内に書いておいてID付与して検索用の入力フォームに値が入力されたらchangeイベントで該当のメソッドを発火。  
URLパラメーターを構築してfetchでRailsのsearchアクションにリクエスト送信、返ってきたJsonをループで回して必要な情報を取ってきて、HTMLを構築。  
`getElementById`で`<ul>`のIDをとってきて、構築したHTMLを`insertAdjacentHTML`で`<ul>`の中に挿入で表示できます。  
全部Stimulusでなんとかなりました。Stimulusってすげえや。  
選択した値をvalueにセットするときに、Administrateで自動的に作られてるフォームだからどうしよう…と思いましたが、開発者ツールでよくよく生成されてるHTMLをみてみたらIDがふられていたので助かりました。  
IDって大事だね。  
というわけでこんな感じになりました  
[![Image from Gyazo](https://i.gyazo.com/c4e76dca784d72327a45214f269b34f6.gif)](https://gyazo.com/c4e76dca784d72327a45214f269b34f6)  
動画撮ってから変更前どうなってるかも一緒に入れておいた方がよかったなとちょっと思いましたが、時間的に収まるか微妙だからまあいいかと思い直しました。  

