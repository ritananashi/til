※スクール内timesの移植（2025/09/29）

Administrateのカスタムフィールド作ってみたけどNameErrorになっちゃうよ～～～  
公式見ながらやったんだけどな  
https://administrate-demo.herokuapp.com/adding_custom_field_types  
`config.autoload_paths`に生成された`app/fields/`を追加で解決  
https://railsguides.jp/autoloading_and_reloading_constants.html#config-autoload-paths  

ダッシュボードで保存された楽天の画像を確認できるようになった  
[![Image from Gyazo](https://i.gyazo.com/f00c460a81c755eeb8b4128b2756a2c8.png)](https://gyazo.com/f00c460a81c755eeb8b4128b2756a2c8)  

 :point_down: searchアクションへの問い合わせはこの記事みたいな感じでやればいけそう :point_down:   
https://plog.kobacchi.com/rails7-ajax-stimulus-email-presence-check/  
あとは検索結果を表示するHTMLを追加すればできるかな  
https://neightbor.jp/blog/rakuten-api-get-item  

Codewarsの`配列内の0を配列末尾に移動する（0以外の数字の配置はそのまま）。`みたいな問題で、愚直に`元の配列の要素数 - 配列から0を引いた要素数`で0の個数を出して、`0を削除した配列に消した数分の0で作った配列を合体`したけど、`reject + select`や`find_byで0に1の基準値を設定する`といった回答があって発想力が弱い！！！としていた。  
ちからがほしい  

面接対策シートをうめつつ楽天の実装をのろのろしていた。  
ダッシュボードの一覧画面と詳細画面で楽天のURLと画像を見れるようにしたかったのでAdministrateをいじっていた。  
URLに関しては、ドキュメントには載ってなかったけど、AdministrateのGitHubにURL用のフィールドがあったのでそれを使った…けど、URLが全部表示されるため表示が崩れてしまったので、URLフィールド用のビューをいじって適当に20文字くらいまで表示されるようにした。  
URL全部見えてる必要ないからね。  
画像に関しては、素のAdministrateには画像表示用のフィールドがないのと、[gem administrate-field-active\_storage](https://github.com/Dreamersoul/administrate-field-active_storage)はアクティブストレージのみ対応なので、画像表示用のカスタムフィールドを追加した。  
カスタムフィールドの作成は[公式ドキュメント](https://administrate-demo.herokuapp.com/adding_custom_field_types)にやり方が書いてあるのでこの通りに実行。  
カスタムロジックとかは必要ないので生成されたままで、ビューだけ`image_tag`を使用するように変更でOK。  
カスタムフィールドを使おうとしたときに最初カスタムフィールドが読み込まれてなくてNameErrorがでていたから、`config.autoload_paths`に`app/fields`を追加したけど、よく考えたら`docker compose reset`でよかったかもしれない。  
> デフォルトでは、あるアプリケーションの自動読み込みパスは次のもので構成されています。アプリケーションの起動時にappの下にあるすべてのサブディレクトリ（assets、javascript、viewsは除く）と、アプリケーションが依存する可能性のあるエンジンの自動読み込みパスです。  
....  
Railsの自動読み込みパスには、appの下のあらゆるカスタムディレクトリも自動的に追加されます。たとえば、アプリケーションにapp/presentersディレクトリがあれば、自動読み込みの設定を変更しなくてもapp/presentersの下に置かれたものをすぐ利用できます。  
[Railsガイド # config.autoload_paths](https://railsguides.jp/autoloading_and_reloading_constants.html#config-autoload-paths)

`docker compose reset`でよかったかもしれない！！！

