※スクール内timesの移植（2025/09/29）

楽天の検索結果をjson形式で返してみるようにしてみている。とりあえず成功  
[![Image from Gyazo](https://i.gyazo.com/531ee05fd6bd565c79a28d8bf8f68c01.png)](https://gyazo.com/531ee05fd6bd565c79a28d8bf8f68c01)  

Stimulusのコントローラーが読み込まれないよ～～～  
`ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):`  
なにごと？  
なんかchromeのせいっぽいのはわかる  
これらしい  
https://chromium.googlesource.com/devtools/devtools-frontend/+/main/docs/ecosystem/automatic_workspace_folders.md  
設定変えてもきえないよお  
Stimulusコントローラー読み込まれないし`ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):`もどうにもならん。ぴえん  
AdministrateはAdministrateのJSしか読み込まないってこと？  
https://github.com/thoughtbot/administrate/blob/main/app/views/administrate/application/_javascript.html.erb  
ひとまず`<%= javascript_include_tag "application" %>`入れたら動いた。  
administrateのissueになんかないか見てみる  
> Javascript Partial
This partial imports the necessary javascript on each page.  
By default, it includes the application JS,  
but each page can define additional JS sources  
by providing a `content_for(:javascript)` block.  

> Javascript Partial
この部分テンプレートは、各ページに必要なJavaScriptをインポートします。  
デフォルトではアプリケーション用JSを含みますが、  
各ページは`content_for(:javascript)`ブロックを指定することで  
追加のJSソースを定義できます。  

これでいいのかな  
だいじょぶそう  
json返ってる！  
[![Image from Gyazo](https://i.gyazo.com/da8e1cd7856d187457c959b837e899d0.png)](https://gyazo.com/da8e1cd7856d187457c959b837e899d0)  
inputだと一文字入力ごとにリクエスト発生しちゃうからchangeにしてみている  

家事代行の立ち合いとかあってあんまりできなかった。

codewarsでワンライナーで書けてにこにこしてたらもっと簡潔なコードがたくさんあってちからがほしくなった。  
正規表現もっと使いこなせるようになりたい。  

楽天の検索用Stimulusコントローラーをせっせと作っていた。  
Stimulusで作ったけど、最初Stimulusのコントローラーが読み込まれなくて首をかしげていた。  
AdministrateはAdministrateのJSしか読み込まないみたい(https://github.com/thoughtbot/administrate/blob/main/app/views/administrate/application/_javascript.html.erb)。  
```ruby
<% content_for :javascript do %>
    <%= javascript_include_tag "application" %>
<% end %>
```
をeditのページに追加したら読み込まれるようになった。  
最初はinputイベントでリクエストを送るようにしていたけど、一文字入力ごとにリクエストが送られてしまうのでchangeイベントに変えた。  
ちゃんとjsonが返ってきたので、次はこれを表示する用のHTMLを追加する実装をしていく。  

Stimulusコントローラーが読み込まれなくていろいろ試してた時に、ログで`ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):`が返ってるのを見つけた。  
chromeの新機能か何かの影響らしいけど、邪魔なので該当するflagsを無効化してみた…けど消えなかった。  
ログにでてきて目障りなだけで開発に何か影響しているわけではなさそうなので置いておくけど、邪魔なのでどうにかしたい気持ちはある…。  

