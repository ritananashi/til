
📖プロを目指す人のためのRuby入門［改訂2版］ 言語仕様からテスト駆動開発・デバッグ技法まで

6章、正規表現についての章。ハンズオンはハッシュ記法を変換するプログラムの作成。

#### 正規表現って何？

wikipediaに曰く、
> 正規表現（せいきひょうげん、英: regular expression）は、文字列の集合を一つの文字列で表現する方法の一つである。  
> [正規表現 - wikipedia](https://ja.wikipedia.org/wiki/%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%8F%BE)

また、チェリー本著者曰く、「パターンを指定して、文字列を効率よく検索/置換するためのミニ言語」とのこと。
正規表現はRubyの専用の機能ではなく、ほかのプログラミング言語やテキストエディだでも一般的に使われている機能。
Rubyでは正規表現はRegexpクラスであるが、この名称は正規表現の英語名の略称が由来。
ほかのプログラミング言語ではRegexクラスと名付けられていたりする。

- チェリー本著者が公開している正規表現の解説記事
  [初心者歓迎！手と目で覚える正規表現入門・その１「さまざまな形式の電話番号を検索しよう」](https://qiita.com/jnchito/items/893c887fbf19e17d3ff9)
  全4回。残りの記事はリンク内に。
  ほぼ同じ内容が[プロになるなら身につけたい プログラマのコーディング基礎力](https://gihyo.jp/book/2017/978-4-7741-8779-2)にも収録されているとのこと。
  さらに詳しい内容が[詳説 正規表現 第3版](https://www.amazon.co.jp/%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%8F%BE-%E7%AC%AC3%E7%89%88-Jeffrey-F-Friedl/dp/4873113598)で学ぶことができる。

  とりあえず[初心者歓迎！手と目で覚える正規表現入門・その１「さまざまな形式の電話番号を検索しよう」](https://qiita.com/jnchito/items/893c887fbf19e17d3ff9)で正規表現について学んでからチェリー本にリターン。

正規表現では「メタ文字」と呼ばれる特殊な文字を使う。
例えば、`\d`は1個の半角数字を表すメタ文字。
`\d`をつなげるとつなげた個数分の半角数字を表現する。
メタ文字以外に普通の文字も使える。`\d\d-\d\d\d\d-\d\d\d\d`だと`数字2個-数字4個-数字4個`という文字列を表す。
文字の個数を指定するときは量指定子と呼ばれるメタ文字を使う。
`{n}`でn字、`{n,m}`でn以上m以下の文字数の指定になる。
`[]`を使うと、[]の中の文字のいずれかということになる。`[abc]`だったら、aかbかcのいずれか1文字ということ。
[]にハイフンを使うとき、`[a-z]`のような順番で書いてしまうと、aまたは-またはzではなく、aからzまでのどれかのアルファベットということになってしまうので、[]で-を使うときは注意が必要。
「～が1文字、あるいはなし」の時には`?`というメタ文字を付ける。2文字以上の文字列の時は、()で囲む。
任意の一文字を表現するときは`.`というメタ文字を使う。
`+`で直前の文字が1文字以上。0文字以上の時は`*`。最長マッチを返す。
`*?`や`+?`のように?を付けると、最短でマッチした部分で終わる。
正規表現を`()`で囲むと、その部分がキャプチャされて連番が付けられる。キャプチャされたくないときは`?:`をキャプチャされたくない部分の頭につける。
`\w`は英単語を構成する文字を意味するメタ文字。[a-zA-Z0-9_]と同じ意味。
`[]`の最初に`^`が入ると否定の意味になる。`[^ab]`だったら、aでもbでもない任意の文字、を表す。

