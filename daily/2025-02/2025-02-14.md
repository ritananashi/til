
📖[プロを目指す人のためのRuby入門［改訂2版］ 言語仕様からテスト駆動開発・デバッグ技法まで](https://gihyo.jp/book/2021/978-4-297-12437-3)

#### シンボル

> シンボルは任意の文字列と一対一に対応するオブジェクトです。  
> 文字列の代わりに用いることもできますが、必ずしも文字列と同じ振る舞いをするわけではありません。  
> 同じ内容のシンボルはかならず同一のオブジェクトです。    
> [公式リファレンス](https://docs.ruby-lang.org/ja/latest/class/Symbol.html)

見た目は文字列と似ているが、文字列とは別物。  
`:シンボルの名前`  
で定義する。
```ruby
# シンボルを作成する
:apple
:banana
:orange

# 文字列を作成する
'apple'
'banana'
'orange'
```

- シンボルと文字列の違い  
  シンボルはSymbolクラスのオブジェクト。文字列はStringクラスのオブジェクト。  
  シンボルは、表面的には文字列と同じように見えるが、Rubyの内部では整数として管理されている。  
  整数として管理されているため、例えば2つの値が同じかを調べるようなときは、文字列よりも高速に処理できる。  
  シンボルには同じシンボルであればまったく同じオブジェクトであるという特徴がある。  
  なので、大量の同じ文字列と大量の同じシンボルなら、シンボルのほうがメモリの使用効率が良くなる。  
  シンボルはイミュータブル（＝変更できない）なオブジェクトなので、破壊的な変更はできない（文字列はミュータブル＝変更可能なオブジェクトなので破壊的な変更ができる）。

- シンボルの特徴と主な用途  
  シンボルは、ソースコード上では名前を識別できるようにしたいが、名前が必ずしも文字列である必要はない場合によく使われる。  
  ハッシュのキーによく使われる。ハッシュのキーにシンボルを使うと、文字列よりも高速に値を取り出せる。  
  プログラム上で区分や状態を管理したいときもシンボルがよく使われる。  
  数値などで管理すると、コンピュータの処理効率はいいが、人間が読むときは脳内で数値の意味を変換しないといけなくなるので、可読性が良くないが、シンボルにすれば処理効率を保ったまま可読性をあげられる。

#### 続・ハッシュについて

- ハッシュのキーにシンボルを使う  
  シンボルをハッシュのキーに使うときは`シンボル: 値`という記法でハッシュを作成できる。  
  キーも値もシンボルの時は、`キー: :値`という記法になる。  

- キーや値に異なるデータ型を混在させる  
  ハッシュのキーは同じデータ型にしなくてもいい。  
  文字列とシンボルを混在させることもできるが、混乱を招くので必要ないときはデータ型はそろえた方がいい。  
  一方で、ハッシュに格納する値に関しては、異なるデータ型が混在するケースもよくある。  

- メソッドのキーワード引数とハッシュ  
  シンボルをハッシュのキーに使ったときとよく似た記法でメソッドの引数を指定する、キーワード引数という機能がある。  
  キーワード引数を使うと、メソッド呼び出し時に度の引数がどんな意味を持つのかの対応関係がわかりやすくなる。  
  ```ruby
  def メソッド名(キーワード引数1： デフォルト値1, キーワード引数2: デフォルト値2)
    メソッドの実装
  end
  ```
  ```ruby
  def eat_lunch(menu, drink: true, sweet: true)
    # ランチメニューを選択
    if drink
      # セットドリンクを選択
    end
    if sweet
      # 食後のデザートを選択
    end
  end
  eat_lunch(pasta, drink: true, sweet: true)
  ```
  ```ruby
  # デフォルト値が設定されている時は、引数を省略できる。
  eat_lunch(curry, sweet: false)
  # キーワード引数は呼び出し時に順番を入れ替えてもいい。
  eat_lunch(sandwich, sweet: false、drink: true)
  ```
  ```ruby
  # デフォルト値を省略することもできる。
  def eat_lunch(menu, drink:, sweet:)
    # 略
  end
  # キーワード引数を指定すれば、デフォルト値ありと同じように使える
  eat_lunch(pasta, drink: true, sweet: true)
  # キーワード引数を省略するとエラーになる。
  ```
  ```ruby
  params = { drink: true, sweet: true }
  # メソッド呼び出しの時、**を付けるとハッシュをキーワード引数として利用できる。
  eat_lunch(pasta, **params)
  ```
  
