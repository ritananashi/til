
📖[プロを目指す人のためのRuby入門［改訂2版］ 言語仕様からテスト駆動開発・デバッグ技法まで](https://gihyo.jp/book/2021/978-4-297-12437-3)

4章　配列とループ処理についての章
ハンズオン部分はRGBカラーを変換するプログラムを作るよう。

- 配列
  複数のデータをまとめて格納できるオブジェクト。Arrayクラス。
  配列内のデータは順番に並んでおり、添え字を指定することでデータを取り出せる。
  配列は数値に限らず、どんなオブジェクトでも格納できる。異なるデータ型を格納することもできる。
  配列の中に配列を含めることもできる（二次元配列）。
  存在しない要素を指定するとnilが返る。
  sizeかlengthメソッドで要素の個数を取得できる。
- 要素の変更、追加、削除
  `配列[添え字] = 新しい値`で指定した要素の変更
  元の大きさよりも大きい添え字を指定すると、間の値はnilとなる。
  `配列 << 値`で配列の最後に要素を追加できる。
  `delete_at(添え字)`で指定した位置の要素を削除。
- 配列を使った多重代入
  ```ruby
  a, b = [1, 3]
  a #=> 1
  b #=> 3
  # 配列でも変数の時と同じように多重代入できる。
  # 配列の要素数が少ないとni;が入り、多いとはみ出した値が切り捨てられる。
  ```
  戻り値を配列として返すメソッドを使うときは、配列で受け取るよりも多重代入を使って最初から別々の変数に入れた方が、コードがすっきりする。

#### ブロック

- Rubyの繰り返し処理
  Rubyはfor文のような、規定数ループを繰り返す繰り返し処理ではなく、配列自身に対して繰り返し処理を命令するので、forよりeachメソッド等を使うことが多い。
  eachメソッド等で配列の要素を取り出し、取り出した要素の扱いについて記述するのがブロック。
  ```ruby
  numbers = [1, 2, 3]
  sum = 0
  numbers.each do |n|
    sum += n
  end
  # do ~ end までがブロック
  ```
  `|n|`にはeachから渡された配列の要素が入る（ブロックパラメータ）。
  ブロックの中で、渡された要素の処理をどうするか、自由にコードが書ける。
- 配列の要素を削除する条件を自由に設定する
  配列の要素を削除するときはdeleteメソッドがあるが、deleteを使うと引数で渡した値に完全一致する要素しか削除できない。
  特定の条件を満たした要素のみ削除したいときはdelete_ifメソッドを使う。
  delete_ifメソッドもeachメソッドと同じように配列の要素を順番に取り出してブロックに渡すが、eachメソッドとは異なり、戻り値が真であれば配列から削除する、という処理になっている。
  Rubyでは、要件を問わず共通する処理はメソッド自身に、要件によって異なる処理はブロックにそれぞれ分担させて、処理を完了されるメソッドがたくさんある。
- ブロックパラメータとブロック内の変数
  ブロックパラメータの名前は何でもいい。使わないときは省略できる。
  ブロック内で定義した変数のスコープはブロック内部のみ。
  ブロック外部で定義されたローカル変数はブロック内部でも参照できる。
  ブロックパラメータの名前をブロック外の変数と同じにすると、ブロック内ではブロックパラメータの値が優先されるが、読み手を混乱させやすいし、不具合の原因になったりするので、同じ名前の変数を使うのはやめた方がいい。
- do ... endと{}
  `do ... end`の代わりに`{}`で囲んでもブロックを作れる。
  改行を含む長いブロックを書くときは`do ... end`、1行でコンパクトに書くときは`{}`と使い分けられていることが多い。
