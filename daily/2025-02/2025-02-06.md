
📖[プロを目指す人のためのRuby入門［改訂2版］ 言語仕様からテスト駆動開発・デバッグ技法まで](https://gihyo.jp/book/2021/978-4-297-12437-3)

#### ブロックを使う配列のメソッド

- map/collect
  `map`は各要素に対してブロックを評価した結果を新しい配列にして返す。`collect`は`map`のエイリアスメソッド。
  ```ruby
  numbers = [1, 2, 3, 4, 5]
  # numbersの各要素に10をかけた新しい配列を作成
  new_numbers = numbers.map { |n| n * 10 }
  new_numbers #=> [10, 20, 30, 40, 50]
  ```
  空の配列を用意して、ほかの配列をループ処理↓結果を空の配列に入れていくような処理は、だいたい`map`に置き換えられる。
- select/find_all/reject
  `select(find_all)`は各要素に対してブロックを評価し、その戻り値が真の要素を集めた配列を返す。
  ```ruby
  numbers = [1, 2, 3, 4, 5, 6]
  # ブロックの戻り値が真になる要素 = 偶数のみ集められる
  even_number = numbers.select{ |n| n.even? }
  even_number #=> [2, 4, 6]
  ```
  `reject`は`select`の反対。戻り値が偽の要素を集める。
  ```ruby
  numbers = [1, 2, 3, 4, 5, 6]
  # ブロックの戻り値が偽になる要素 = 奇数のみ集められる
  even_number = numbers.reject{ |n| n.even? }
  even_number #=> [1, 3, 5]
  ```
- find/detect
  `find(detect)`はブロックの戻り値が真になった最初の要素を返す。
  最初に真になった要素だけ。
- sum
  要素の合計を求める。
  ブロックを使うと、ブロックパラメータに各要素が順番に渡されて、ブロックの戻り値が合計される。
  ```ruby
  numbers = [1, 2, 3, 4]
  # 各要素を2倍しながら足していく
  numbers.sum { |n| n * 2 } #=> 20
  ```
  メソッドの初期値は0だけど、引数で0以外の初期値を指定できる。
  初期値に文字列を指定すると、各要素の文字列が+で連結されて一つの文字列にすることができる。これは`join`メソッドでもできる。
  `join`メソッドで連結するときは、配列に文字列以外が含まれていてもto_sメソッドで各要素を文字列に変換してから連結する。
  文字列の連結は、基本は`join`メソッドを使った方がシンプルだが、空文字以外の初期値を与えたり、ブロック内で文字を加工したいときは`sum`メソッドを使うといい。
- &とシンボル
  1. ブロックパラメータが1個だけ
  2. ブロックの中で呼び出すメソッドに引数がない
  3. ブロックの中で、ブロックパラメータに対してメソッドを1回呼び出す以外の処理がない
  
  という条件がそろったときは`&:メソッド名`書き方を使うことができる。
  ```ruby
  ['ruby', 'python', 'java'].map(&:upcasae) #=> ["RUBY", "PYTHON", "JAVA"]
  # ['ruby', 'python', 'java'].map { |s| s.upcase }と同じ
  ```
  ブロックの中でメソッドではなく演算子を使っていたり、ブロック内のメソッドで引数を渡したり、ブロックの中で複数の分を実行している時は、この書き方はできない。
