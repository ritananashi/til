
:open_book:教材：[パーフェクトRuby on Rails【増補改訂版】](https://gihyo.jp/book/2020/978-4-297-11462-6)

### コールバックオブジェクト

モデルのコールバックの中で、コールバックを実装するオブジェクトのことをコールバックオブジェクトと呼ぶ。  
コールバックオブジェクトは、モデルとは独立したクラスとｓちえ定義されるので、複数のモデルの間で再利用できる。  
各コールバックはインスタンスメソッドとして実装され、これらのメソッドはインスタンスメソッドを利用するオブジェクトを引数として受け取る。
属性の暗号化やほかのデータ操作に関するロジックを実装していくとすぐにモデルが肥大化していくが、コールバックオブジェクトを導入するとモデルからロジックを分離できる。  
また、コールバックオブジェクトを導入していると、ほかのモデルで同じ処理を行いたいときに再利用できる。   
あるロジックを複数のコールバックを組み合わせて実装するコールバックオブジェクトでは、その設定がどうしても煩雑になってしまうし、コールバックオブジェクトがどのコールバックを実装しているのかという詳細がモデルのあちこちに散らばっていくと、アプリケーションの保守性が低下していく。  
こうした事態を避けるためにも、コールバックオブジェクトを単独で利用するのではなく、これらの設定を容易にするConcernと併用するといい。
複雑なデータ操作を実装したいとき、同じようなことをConcernのみでも実装できる。  
データの暗号化や更新系のデータ操作に関するロジックの場合はコールバックオブジェクトが利用できるが、木構造のデータの取得など、参照系のデータ操作に関するロジックの時は、コールバック自体が実装に利用できないので、Concernを利用するといい。

パーフェクトRuby on Rails【増補改訂版】読了
