
:open_book:教材：[パーフェクトRuby on Rails【増補改訂版】](https://gihyo.jp/book/2020/978-4-297-11462-6)

6-3から。

node.jsのバージョンを14に下げることができた。ので、どうもうまくインストールできてなかったっぽいWebpackerを再インストール。 
今度はpackage.jsonにWebpackerが追加された。  
続いてやり忘れてた6-2-4Bootstrapの導入。  
yarn addで諸々追加。無事に終了。

6-3 OAuthを利用してのGitHubログイン機能。  
OAuthはアプリケーションに対して安全にアクセス権限を提供するためのプロトコル。  
例えばGitHubのAPIを利用するアプリケーションがあったとして、OAuthなしでやろうとすると、IDとPWをアプリケーション側に渡す必要があるので、PW漏洩の危険が増すし、アプリケーションがユーザと同じ権限を持ってしまう。  
OAuthを使うことでアプリケーションにIDとPWを渡さなくてもよくなるので、この危険な状態を回避できる。  
GitHubにアプリケーションを登録、OmniAuth関連のGemをインストール。  
config/initialisers/omniauth.rbは自動で生成されるかと思ったが、生成されないようなので手動で作成。必要な記述をしていく。  
config/credentials.yml.encも編集。編集方法がわからずググった → [たった30分でわかるcredentials.yml.enc[rails5.2] - 環境変数を定義する使い方 -](https://qiita.com/gyu_outputs/items/92c4a2a2f96edb10e298)  
ユーザのモデルを作成までは問題なく進んだが、マイグレーションを実行したところでエラーが発生。
よくわからないので全文載せていく。
```console
== 20241125080148 CreateUsers: migrating ======================================
-- create_table(:users)
   -> 0.0022s
-- add_index(:user, [:provider, :uid], {:unique=>true})
rails aborted!
StandardError: An error has occurred, this and all later migrations canceled:

SQLite3::SQLException: no such table: main.user
/usr/local/bundle/gems/sqlite3-1.6.9/lib/sqlite3/database.rb:177:in `initialize'
/usr/local/bundle/gems/sqlite3-1.6.9/lib/sqlite3/database.rb:177:in `new'
/usr/local/bundle/gems/sqlite3-1.6.9/lib/sqlite3/database.rb:177:in `prepare'
/usr/local/bundle/gems/sqlite3-1.6.9/lib/sqlite3/database.rb:221:in `execute'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/sqlite3/database_statements.rb:25:in `block (2 levels) in execute'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/dependencies/interlock.rb:48:in `block in permit_concurrent_loads'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/share_lock.rb:187:in `yield_shares'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/dependencies/interlock.rb:47:in `permit_concurrent_loads'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/sqlite3/database_statements.rb:24:in `block in execute'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract_adapter.rb:728:in `block (2 levels) in log'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract_adapter.rb:727:in `block in log'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract_adapter.rb:718:in `log'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/sqlite3/database_statements.rb:23:in `execute'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract/schema_statements.rb:787:in `add_index'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:890:in `block in method_missing'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:858:in `block in say_with_time'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:858:in `say_with_time'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:879:in `method_missing'
/myapp/db/migrate/20241125080148_create_users.rb:12:in `change'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:828:in `exec_migration'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:812:in `block (2 levels) in migrate'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:811:in `block in migrate'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:471:in `with_connection'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:810:in `migrate'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1002:in `migrate'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1310:in `block in execute_migration_in_transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1361:in `block in ddl_transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract/database_statements.rb:280:in `block in transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract/transaction.rb:280:in `block in within_new_transaction'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract/transaction.rb:278:in `within_new_transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract/database_statements.rb:280:in `transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/transactions.rb:212:in `transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1361:in `ddl_transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1309:in `execute_migration_in_transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1281:in `block in migrate_without_lock'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1280:in `each'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1280:in `migrate_without_lock'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1231:in `migrate'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1061:in `up'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1036:in `migrate'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/tasks/database_tasks.rb:238:in `migrate'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/railties/databases.rake:86:in `block (3 levels) in <main>'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/railties/databases.rake:84:in `each'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/railties/databases.rake:84:in `block (2 levels) in <main>'
/usr/local/bundle/gems/railties-6.0.6.1/lib/rails/commands/rake/rake_command.rb:23:in `block in perform'
/usr/local/bundle/gems/railties-6.0.6.1/lib/rails/commands/rake/rake_command.rb:20:in `perform'
/usr/local/bundle/gems/railties-6.0.6.1/lib/rails/command.rb:48:in `invoke'
/usr/local/bundle/gems/railties-6.0.6.1/lib/rails/commands.rb:18:in `<main>'
/usr/local/bundle/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'
/usr/local/bundle/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'
/myapp/bin/rails:9:in `<top (required)>'
/usr/local/bundle/gems/spring-2.1.1/lib/spring/client/rails.rb:28:in `load'
/usr/local/bundle/gems/spring-2.1.1/lib/spring/client/rails.rb:28:in `call'
/usr/local/bundle/gems/spring-2.1.1/lib/spring/client/command.rb:7:in `call'
/usr/local/bundle/gems/spring-2.1.1/lib/spring/client.rb:30:in `run'
/usr/local/bundle/gems/spring-2.1.1/bin/spring:49:in `<top (required)>'
/usr/local/bundle/gems/spring-2.1.1/lib/spring/binstub.rb:11:in `load'
/usr/local/bundle/gems/spring-2.1.1/lib/spring/binstub.rb:11:in `<top (required)>'
/myapp/bin/spring:15:in `<top (required)>'
bin/rails:3:in `load'
bin/rails:3:in `<main>'

Caused by:
ActiveRecord::StatementInvalid: SQLite3::SQLException: no such table: main.user
/usr/local/bundle/gems/sqlite3-1.6.9/lib/sqlite3/database.rb:177:in `initialize'
/usr/local/bundle/gems/sqlite3-1.6.9/lib/sqlite3/database.rb:177:in `new'
/usr/local/bundle/gems/sqlite3-1.6.9/lib/sqlite3/database.rb:177:in `prepare'
/usr/local/bundle/gems/sqlite3-1.6.9/lib/sqlite3/database.rb:221:in `execute'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/sqlite3/database_statements.rb:25:in `block (2 levels) in execute'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/dependencies/interlock.rb:48:in `block in permit_concurrent_loads'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/share_lock.rb:187:in `yield_shares'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/dependencies/interlock.rb:47:in `permit_concurrent_loads'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/sqlite3/database_statements.rb:24:in `block in execute'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract_adapter.rb:728:in `block (2 levels) in log'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract_adapter.rb:727:in `block in log'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract_adapter.rb:718:in `log'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/sqlite3/database_statements.rb:23:in `execute'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract/schema_statements.rb:787:in `add_index'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:890:in `block in method_missing'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:858:in `block in say_with_time'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:858:in `say_with_time'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:879:in `method_missing'
/myapp/db/migrate/20241125080148_create_users.rb:12:in `change'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:828:in `exec_migration'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:812:in `block (2 levels) in migrate'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:811:in `block in migrate'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:471:in `with_connection'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:810:in `migrate'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1002:in `migrate'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1310:in `block in execute_migration_in_transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1361:in `block in ddl_transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract/database_statements.rb:280:in `block in transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract/transaction.rb:280:in `block in within_new_transaction'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract/transaction.rb:278:in `within_new_transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract/database_statements.rb:280:in `transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/transactions.rb:212:in `transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1361:in `ddl_transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1309:in `execute_migration_in_transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1281:in `block in migrate_without_lock'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1280:in `each'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1280:in `migrate_without_lock'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1231:in `migrate'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1061:in `up'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1036:in `migrate'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/tasks/database_tasks.rb:238:in `migrate'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/railties/databases.rake:86:in `block (3 levels) in <main>'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/railties/databases.rake:84:in `each'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/railties/databases.rake:84:in `block (2 levels) in <main>'
/usr/local/bundle/gems/railties-6.0.6.1/lib/rails/commands/rake/rake_command.rb:23:in `block in perform'
/usr/local/bundle/gems/railties-6.0.6.1/lib/rails/commands/rake/rake_command.rb:20:in `perform'
/usr/local/bundle/gems/railties-6.0.6.1/lib/rails/command.rb:48:in `invoke'
/usr/local/bundle/gems/railties-6.0.6.1/lib/rails/commands.rb:18:in `<main>'
/usr/local/bundle/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'
/usr/local/bundle/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'
/myapp/bin/rails:9:in `<top (required)>'
/usr/local/bundle/gems/spring-2.1.1/lib/spring/client/rails.rb:28:in `load'
/usr/local/bundle/gems/spring-2.1.1/lib/spring/client/rails.rb:28:in `call'
/usr/local/bundle/gems/spring-2.1.1/lib/spring/client/command.rb:7:in `call'
/usr/local/bundle/gems/spring-2.1.1/lib/spring/client.rb:30:in `run'
/usr/local/bundle/gems/spring-2.1.1/bin/spring:49:in `<top (required)>'
/usr/local/bundle/gems/spring-2.1.1/lib/spring/binstub.rb:11:in `load'
/usr/local/bundle/gems/spring-2.1.1/lib/spring/binstub.rb:11:in `<top (required)>'
/myapp/bin/spring:15:in `<top (required)>'
bin/rails:3:in `load'
bin/rails:3:in `<main>'

Caused by:
SQLite3::SQLException: no such table: main.user
/usr/local/bundle/gems/sqlite3-1.6.9/lib/sqlite3/database.rb:177:in `initialize'
/usr/local/bundle/gems/sqlite3-1.6.9/lib/sqlite3/database.rb:177:in `new'
/usr/local/bundle/gems/sqlite3-1.6.9/lib/sqlite3/database.rb:177:in `prepare'
/usr/local/bundle/gems/sqlite3-1.6.9/lib/sqlite3/database.rb:221:in `execute'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/sqlite3/database_statements.rb:25:in `block (2 levels) in execute'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/dependencies/interlock.rb:48:in `block in permit_concurrent_loads'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/share_lock.rb:187:in `yield_shares'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/dependencies/interlock.rb:47:in `permit_concurrent_loads'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/sqlite3/database_statements.rb:24:in `block in execute'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract_adapter.rb:728:in `block (2 levels) in log'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract_adapter.rb:727:in `block in log'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract_adapter.rb:718:in `log'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/sqlite3/database_statements.rb:23:in `execute'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract/schema_statements.rb:787:in `add_index'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:890:in `block in method_missing'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:858:in `block in say_with_time'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:858:in `say_with_time'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:879:in `method_missing'
/myapp/db/migrate/20241125080148_create_users.rb:12:in `change'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:828:in `exec_migration'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:812:in `block (2 levels) in migrate'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:811:in `block in migrate'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:471:in `with_connection'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:810:in `migrate'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1002:in `migrate'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1310:in `block in execute_migration_in_transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1361:in `block in ddl_transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract/database_statements.rb:280:in `block in transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract/transaction.rb:280:in `block in within_new_transaction'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/usr/local/bundle/gems/activesupport-6.0.6.1/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract/transaction.rb:278:in `within_new_transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/connection_adapters/abstract/database_statements.rb:280:in `transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/transactions.rb:212:in `transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1361:in `ddl_transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1309:in `execute_migration_in_transaction'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1281:in `block in migrate_without_lock'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1280:in `each'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1280:in `migrate_without_lock'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1231:in `migrate'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1061:in `up'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/migration.rb:1036:in `migrate'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/tasks/database_tasks.rb:238:in `migrate'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/railties/databases.rake:86:in `block (3 levels) in <main>'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/railties/databases.rake:84:in `each'
/usr/local/bundle/gems/activerecord-6.0.6.1/lib/active_record/railties/databases.rake:84:in `block (2 levels) in <main>'
/usr/local/bundle/gems/railties-6.0.6.1/lib/rails/commands/rake/rake_command.rb:23:in `block in perform'
/usr/local/bundle/gems/railties-6.0.6.1/lib/rails/commands/rake/rake_command.rb:20:in `perform'
/usr/local/bundle/gems/railties-6.0.6.1/lib/rails/command.rb:48:in `invoke'
/usr/local/bundle/gems/railties-6.0.6.1/lib/rails/commands.rb:18:in `<main>'
/usr/local/bundle/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'
/usr/local/bundle/gems/bootsnap-1.18.4/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'
/myapp/bin/rails:9:in `<top (required)>'
/usr/local/bundle/gems/spring-2.1.1/lib/spring/client/rails.rb:28:in `load'
/usr/local/bundle/gems/spring-2.1.1/lib/spring/client/rails.rb:28:in `call'
/usr/local/bundle/gems/spring-2.1.1/lib/spring/client/command.rb:7:in `call'
/usr/local/bundle/gems/spring-2.1.1/lib/spring/client.rb:30:in `run'
/usr/local/bundle/gems/spring-2.1.1/bin/spring:49:in `<top (required)>'
/usr/local/bundle/gems/spring-2.1.1/lib/spring/binstub.rb:11:in `load'
/usr/local/bundle/gems/spring-2.1.1/lib/spring/binstub.rb:11:in `<top (required)>'
/myapp/bin/spring:15:in `<top (required)>'
bin/rails:3:in `load'
bin/rails:3:in `<main>'
Tasks: TOP => db:migrate
(See full trace by running task with --trace)
```
テーブルがない、ということみたいだが、そもそもテーブルを新しく作成してマイグレーションしたので当たり前では…。  
表示されているファイルで何かあるのかと思うが、特にいじってはいない。  
SQLite3はインストールされているはずだが…。と思ったが、`apt-get install`のとこに`libsqlite3-dev'は書いていたけど`sqlite3`は書いてなかったので追記してビルドしなおし。  
`docker compose up`をしたら、↑と同じエラーが出てupできなくなっていた。  
明日また調べなおすか…。
