
:open_book:教材：[パーフェクトRuby on Rails【増補改訂版】](https://gihyo.jp/book/2020/978-4-297-11462-6)

5-2-5から。

Active Storageはダイレクトアップロードにも対応していて、アプリケーションサーバを経由せずにファイルを直接クラウドストレージにアップロードできる。  
アプリケーションサーバを経由しないので、アップロードにかかる時間を減らせて、アプリケーションサーバへの負荷を減らせる。  
Rails6.0ではapp/javascript/packs/application.jsに  
`require("@rails/activestorage").start()`  
と書かれている。これがダイレクトアップロード用のJavaScriptライブラリ。  
これが読み込まれている状態で、画像アップロード用のformに`direct_upload: true`を記述すると、フォームのsubmitボタンを押したタイミングでファイルをストレージにダイレクトアップロードする。  
ダイレクトアップロードには実行時に発火するJavaScript用のイベントも用意されていて、これらのイベントを活用することでユーザ体験を向上させることができる。  
参考：[Railsガイド - Active Storageの概要 - ダイレクトアップロード](https://railsguides.jp/active_storage_overview.html#%E3%83%80%E3%82%A4%E3%83%AC%E3%82%AF%E3%83%88%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89)  

-----後で続きかく-----
