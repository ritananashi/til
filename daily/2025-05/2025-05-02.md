※スクール内timesの移植（2025/09/16）

https://motohiro-mm.hatenablog.com/entry/2024/12/08/110117  
こ、これだー！！！！  
解決ｯ！！！

Turbo_flameだけだと思ってたけど、他のリンクも全部406でだめになってたからRailsのほうかも…と思って調べたら`allow_browser versions:`で設定されているバージョン未満のブラウザでサービスにアクセスした場合、406エラーを返すようになっていることがわかったので、`allow_browser versions: :modern`をコメントアウトで解決  
モバイルブラウザの挙動確認できるようになったのでレスポンシブ対応をやっていく  
TailwindもStimulusもなんもわかんねえよ2nd season

- 学習時間：6h/26h/880h
- 学習内容：卒制

昨日、開発者ツールのモバイルブラウザで出ていた406エラーについて、Turbo_flameでだけ出ていると思っていましたが、試しに他のリンクもクリックしてみたら全部406になったので、これはTurbo_flameじゃないな？と思い、Rails方面で調べてみたら、すぐにそれらしいものが見つかりました。  
https://motohiro-mm.hatenablog.com/entry/2024/12/08/110117  
どうもRails7.2くらいから、デフォルトでアクセスできるブラウザを制限する機能が追加されていたようです。  
デフォルトだと、Safari 17.2以上, Chrome 120以上, Firefox 121以上, Opera 106以上がサポートされているようです。  
開発者ツールのブラウザは、iPhone設定だとSafari16.6なので、サポート対象外なので406エラーが出されてしまっていました。  
というわけで、application_controller.rbからこの機能をコメントアウトして、無事にモバイルブラウザでの表示を確認することができるようになりました。やったね。

ばりばりレスポンシブ対応を進めるぞーと思いましたが、PC画面の時と違ってデザインを詰めて考えていなかったので…。  
ぼやぼやしたイメージを形にしながら固めていくことになったので、時間がかかりました。  
TailwindCSSはデフォルトをモバイルブラウザ、それ以上の画面サイズの時の表示を`sm:`とかで指定していく…というような感じなので、今当ててるCSSにはほぼ全部指定を入れるところから始めないといけないです。気が遠くなってきた。  
とりあえずヘッダーから…と思ってヘッダーをいじってました。  

ヘッダーの配置をモバイルとPCとでまるっと変えて、左はじにハンバーガーメニュー…とかやっていたら、同じ記述がファイル内にたくさん書かれてしまうことになってしまったので、モバイル用のヘッダーパーシャルとモバイル以外用のヘッダーパーシャルを作って、それぞれを`block sm:hidden`、`hidden sm:block`の`class`を指定した`div`要素で囲ってみたらどうだろうと思ってやってみました。  
両方をrenderで読み込んでどうなるか見てみましたが、今のところ支障はなさそうです。やったぜ。  
ハンバーガーメニューは[tailwindcss-stimulus-components](https://github.com/excid3/tailwindcss-stimulus-components)のSlidOverを使用することにしました。  
カスタマイズがドキュメントが少なくて難しい…ので、とりあえずいじれるところ以外はデフォルトで使ってます。  
メニューを表示させるとことはアニメーションがつくのですが、閉じるときにもアニメーションが欲しい…どうしたらいいんだろう。  
ハンバーガーメニューと、検索バーを上からにゅっと出したかったのでここで使うことにしました。  
同時に使えるかちょっと心配でしたが、`dialog`要素は複数同時に使えるっぽいので、試しにやってみたら特に競合はしてなさそうです（いまのところ）。  
今日一日でヘッダーにかなり時間を取られたので、明日は他の部分のレスポンシブ対応も終わらせたいなあとは思いますが、カードデザインとかあんまり考えてないから時間がかかるかも。  
スケジュールを巻き返せなくてちょっと焦りが出てきました。

