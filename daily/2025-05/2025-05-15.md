※スクール内timesの移植（2025/09/16）

`this.element.remove()`の挙動確認したけどだいじょぶそうだからこのままでいいか。  
使いまわすパーシャルにインスタンス変数を持ち込んで沼ってました（bookmarkとlikeで同じ実装しているのにどうして…）

- 学習時間：4h30min/15h/920h
- 学習内容：卒制

フォローフォロワー機能作りました。  
昨日のTurbo-flame使ったモーダルのキャッシュが残って一瞬モーダルが表示されてしまう問題は、`this.element.remove()`の挙動を確認して問題なさそうだったのでこのままにしておくことにしました。  

フォローボタンの実装をしていた時に、パーシャルを作ってプロフィール画面とフォロー・フォロワー一覧画面とで流用しようとしたのですが、パーシャル内でインスタンス変数を使ってしまったばかりにエラーが出て地味に沼ってました。  
`render`でパーシャルを表示するときは、localsオプションで変数に入れる値を指定できるので、ここにフォロー・フォロワー一覧画面で使ってるブロック変数を入れたて、`ログインしているユーザーが、表示されてるユーザーをフォローしてるかどうか`でボタンを出し分けてその場でフォローしたりフォロー解除したりできるようにしたかったのですが、`@user`の値が入ってしまってなんでやとしてました。  
パーシャルでインスタンス変数を使っているんだからコントローラに定義した`@user`の値以外使われないね。そうだね…。  
いいねとブックマークで同じ実装してるのに間違えてしまっていました。なんでや…。  
というわけでローカル変数に切り替えておわりです。  
turbo_streamでプロフィール内のフォローフォロワー数カウントも一緒に更新はいるようにしているのですが、モーダル（Turbo_frame内）でフォロー・フォロー解除したときはカウントが動かないのはこんど何とかするね…。  
変なところで時間使って疲れちゃった。

明日は通知機能を作ります。ポリモーフィック関連付けでやるかどうかを悩んでまだ答えが出ないのでそこから。

