※スクール内timesの移植（2025/09/16）


ぼく「よし！インクの管理画面作り終わったぞ！！つぎメーカーの管理画面の実装だ！！」

ぼく「…とくにやることがなかった」


管理画面作成　完


- 予定
  オートコンプリート機能の実装（入力が楽になる＆表記ゆれを回避できる）
- 要望
  レスポンシブ対応（スマホから操作できると楽＆アクセスの導線が増える）
- やりたいこと
  OGPの実装（Xシェア時の見栄えをよくしたい）

OGP画像だけ作ったからレスポンシブ対応をやる

スマホサイズのブラウザで:mag: 押したら検索バーが上からにゅって出てくるやつどうやるんだ（サイドバーではない）

モーダルかなー…？Turbo_frame使わなければ遷移はできるか…。

と思ったらスマホサイズだとTurbo_frameのモーダルが起動しないんじゃが！？

```
Uncaught (in promise) TurboFrameMissingError: The response (406) did not contain the expected <turbo-frame id="remote_modal"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload
```
どうして？


- 学習時間：5h/20h/874h
- 学習内容：卒制
  

今日ものんびりやってました。GWは毎年気温が乱高下しやすいのでぐえーとなります。
  

管理画面のインク一覧や詳細画面でのCategoryの表示をIDじゃなくcolorにすることができました。

ビューファイルをオーバーライドしてDBのデータをそのまま表示になってたところを`find`でcolorを表示させるようにしました。

擬似モデルでなければ、ダッシュボードの`display_resource`というメソッドをオーバーライドするだけでできたのですが、擬似モデルなのでそれができないこと、セレクトボックスはCategory以外で使うところがないことから、ビューファイルのほうをオーバーライドすることにしました。

というわけでインクの管理画面も完成です。

続いてメーカーの管理画面…と思ったのですが、Administrateのデフォルトの機能だけで十分だったので、カラムの表示をわかりやすくしたり、デフォルトの表示順をID昇順に変えたりだけで終わりました。

管理画面の実装終わり！
  

次の実装に入ろうと思ったのですが、当初の予定はオートコンプリート機能の実装でしたが、レスポンシブ対応とOGPの設定もやりたかったのでどれから手を付けるか…と考えていました。

OGP画像を作りながらいろいろ考えましたが、スマホからもアプリが使えた方がいいのでレスポンシブからやることにしました。

その次に（静的）OGPにして、次にオートコンプリートにします。

動的OGPもやりたいけど、Minimagickでやりたい形で実装するのが難しそうなので後回しにします。

Cloudinaryとかに変えてもいいかも？とは思いましたが、Minimagickでできそうではあるので、とりあえずMinimagickで試してみます。

で、レスポンシブ対応をしようということでTailwindでどうやるのか調べてました。

基本的にデフォルトをモバイルブラウザ対応ということにして、それ以上の画面サイズの時のCSSを個別で割り当てていくという感じみたいですね。

私は今現在デフォルトをPC画面サイズにしてるので、改修する場所がかなり多くなりそうです。今後新しく作るものはモバイルブラウザをデフォルトで作っていった方が楽そう。

ヘッダーにおいてる検索フォームを、モバイルブラウザの時は :mag: をクリックしたら上からにゅっと検索フォームが出てくるようにしたいなーと思って、モーダル？なのかな？と思い、現在のモーダルがモバイルブラウザだとどう表示されるのかを見たくて試してみたところ、
```
Uncaught (in promise) TurboFrameMissingError: The response (406) did not contain the expected <turbo-frame id="remote_modal"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload
```
というエラーがでてモーダルが開きませんでした。なんだと…。

PC画面にしたらモーダルが開くので、モバイルブラウザでのみの挙動みたいです。どうして。

Turbo-railsの公式issueに類似例がありましたが、まだ解決していませんでした…。→https://github.com/hotwired/turbo-rails/issues/318

一応、パスに`format: :turbo_stream`を追加したら解決した、というコメントはありましたが、私が使ってるのは`Turbo-flame`だしなあ…と思って考え中です。試してみてもいいかも。

とりあえずモーダル部分以外レスポンシブ対応してみてからここをどうするか考えようと思います。

