※スクール内timesの移植（2025/09/16）

病院の事業内容 is 何（職務経歴書を書いている）  
医療サービスの提供…？でいいのか…？

application.html.erb以外のレイアウトファイル使うとき`<head>`ないとだめだと思ったけど、レンダリングされてるHTML見たら部分テンプレートみたいな読み込まれ方してるから試しに`<%= yield %>`以外全部消したらいけた  
`<%= yield %>`だけにしたら、昨日のモバイル→PCブラウザにしたときにリンクとかクリックできなくなる問題も解決した～～～ :v:

- 学習時間：7h/11h30min/897h30min
- 学習内容：卒制 + 就活準備

職務経歴書の締め切りが迫ってきているので手を付け始めました（遅い）  
完成させられるかな～～～と思いましたが、途中で完全に気が散ってしまって目についた本を読み始めたりなどしてしまったので今日は途中までで切り上げました。  
そういうこともある。

昨日はレイアウトファイルを新しく作るときは`<head>`とかもなくちゃだめだと思ってましたが、レンダリングされたコードを見たときに、オートコンプリートの`<ul>`要素の中にオートコンプリート用のビューがレンダリングされていたので、ワンチャン`<%= yield %>`書くだけで行けるのでは？（application.html.erbのbodyの中にレンダリングされてるし…）と思い、試してみたらできました :v:   
すっかりレイアウトファイルを新しく作っているのだから、application.html.erbにあった記述がなきゃだめだと思ってましたが、レンダリングがどのようになるのかでどのような記述が必要かは変わってくるよな、と思い直しました。  
部分テンプレートみたいな使い方ができるようになったので良かったです。  
昨日発生していた、開発者モードでモバイル→PCにしたときに画面がクリックできなくなる問題も一緒に解決しました。  
`<body>`の中にまはHTMLのいろいろな記述が入ってしまっていたので、それが干渉してたのかな？と思います。

というわけで今度はレビュー投稿フォームにオートコンプリートつけてました。  
必要な個所はインク入力欄…ですが、インク登録フォームにも必要なの忘れて終わり！としてしまいました。明日やります。  
昨日作ったオートコンプリートを流用したので、メーカー名入れても反応しちゃいます。  
既存のアクションを流用してどうにかメーカー名は表示しないように…と思い、URLで判定…と思いましたが、同じアクションを使っているヘッダーのフォームにも影響が出てしまうのでやめました。  
ここはやはり、①インクとメーカー（検索フォームで使う）、②インク（レビュー投稿フォーム）、③メーカー（インク登録フォーム）のみっつのアクションとビューを作らなければならないのか…！と思いましたが、もうちょっと調査はしてみます。  
手段は…なさそうですが…。  
入力フォームの名前を判定できればなあと思います。できるのかな。

投稿フォームのオートコンプリートが終わったと思い込んでいたので、今日の残り時間も少ないしスマホでみたときにモーダルの閉じるボタンに黒枠が出てるぞ問題をやってしまおうと思って調査してました。  
最初はDaisyUIの関係かな？と思いましたが、CSSを見ているとどうも違いそうで、じゃあ他の何かかな？と思ってスマホでDaisyUIのモーダルのページを見に行ってみました。  
そうしたら、DaisyUI公式のモーダルも閉じるボタンに黒枠が出ていたので、Dialog要素の問題かな？と思いました。  
「Dialog 閉じるボタン 黒枠が出る」みたいな検索ワードで検索かけてみましたが、それらしいページが引っ掛からず、手掛かりがなさ過ぎたのでGPTに聞いてみました。  
フォーカスリングかも…と教えてもらいました。キーボード操作などで選択されている要素を可視化してわかりやすくするためのもの見たいです。  
`dialog`要素は
> [`HTMLDialogElement.showModal()`](https://developer.mozilla.org/ja/docs/Web/API/HTMLDialogElement/showModal) を用いて `<dialog>` を開いたとき、フォーカスは内部で最初のフォーカス可能な要素に設定されます。
https://developer.mozilla.org/ja/docs/Web/HTML/Reference/Elements/dialog

とのことなので、このために最初にフォーカス可能な閉じるボタンにフォーカスが当たっていたようです。  
原因がわかれば対処ができるので、モーダルを開いたときにフォーカスしてほしい要素に`autofocus: true`(Railsのformとかに設定するときはこれ）を設定していきました。  
デプロイしてスマホでどうなってるか見ないとうまくいってるかわかりませんが、うまくいっていることを祈ります。  
他にもCSSを調整したい部分があるので、確認は明日になるかな。

