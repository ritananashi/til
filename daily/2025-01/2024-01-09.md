
📖[令和06年 イメージ＆クレバー方式でよくわかる かやのき先生の基本情報技術者教室](https://gihyo.jp/book/2023/978-4-297-13827-1)

#### データの正規化

必要なデータ項目を整理して、データが重複しないように表を分割すること。  
データベース捜査に伴う重複更新や矛盾の発生を防ぐことが目的。

- 非正規形  
  正規化されていない表。要求されたデータ分、同じ項目が繰り返される。
- 第1正規形  
  非正規形のデータから繰り返し項目を排除する。  
  また、計算で求めらえる項目を削除する。
  - 複合主キー  
    複数の列を組み合わせることで、行を一意に特定する。
- 第2正規形  
  主キーの一部の項目によって決まる項目を別の表に分離する。
  - 部分関数従属  
    主キーの一部の項目によって、項目が一意に決まる関係
  - 完全関数従属  
    主キーによって、項目が一意に決まる関係
- 第3正規形  
  主キー以外の項目によって決まる項目を、別の表に分離する。
  - 推移的関係従属  
    主キー以外の項目によって、項目が一意に決まる関係

#### トランザクション処理

データベース更新時に切り離すことができない一連の処理
- ACID特性  
  - 原子性  
    トランザクション処理が、すべて完了したか、まったく処理されていないかで終了すること
  - 一貫性  
    データベースの内容に矛盾がないこと
  - 独立性  
    複数のトランザクションを同時に実行した場合と、順番に実行した場合の処理結果が一致すること
  - 耐久性  
    トランザクションが正常終了すると、更新結果は障害が発生してもデータベースから消失しないこと
- 排他制御  
  データベース更新時にデータの不整合が発生しないように、データの更新中はアクセスを制限（ロック）して、別のトランザクションから更新できないよう制御すること。  
  データを更新するときに、ロックの粒度を大きくするとほかのトランザクションの待ち状態が多く発生し、全体のスループットが低下してしまう。
  - 共有ロック  
    トランザクションがデータを参照する前に掛けるロック
  - 専有ロック  
    トランザクションがデータを更新する前に掛けるロック
- デッドロック  
  複数のトランザクションが、互いに相手が専有ロックしている資源を要求して待ち状態となり、実行できなくなる状態。
- 2相コミットメント  
  分散型データベースシステムにおいて、一連のトランザクション処理を行う複数サイトに更新処理が確定可能かどうかを問い合わせた後、すべてのサイトが確定可能であれば、更新処理を確定する方式。
  - Hadoop  
    大規模なデータを複数のサーバに分散し、並列して高速処理するミドルウェア

#### データベースの障害回復

- ログファイル  
  データベースの更新前や更新後の値を書き出して、データベースの更新記録を取ったもの。ジャーナルファイルとも。
  - フルバックアップファイル  
    データベースの全データをバックアップ
- データベースの障害回復
  - ロールフォワード  
    データベースのハードウェア障害に対して、フルバックアップ時点の状態に復元した後、ログファイルの更新後情報を使用して復旧させる方法
  - ロールバック  
    トランザクション処理プログラムが、データベースの更新途中に異常終了した場合に、ログだいるの更新前情報を使用して復旧させる方法

#### データ操作とSQL

- 関係演算
  関係データベースの表から、目的のデータを取り出す演算
  - 射影
    表の中から特定の列を抽出する。SELECT 〇〇 FROM 〇〇。
  - 選択
    表の中から条件に合致した列を抽出する。WHERE 条件式
  - 結合
    二つ以上の表を結合して、一つの表を作成する。JOIN

- SQL
  関係データベースの表を定義したり、データを操作したりする言語。
  - データ定義言語
    データベースや表などを定義する言語。
  - データ操作言語
    データの抽出や挿入、更新、削除などを行う。
