
📖[プロを目指す人のためのRuby入門［改訂2版］ 言語仕様からテスト駆動開発・デバッグ技法まで](https://gihyo.jp/book/2021/978-4-297-12437-3)

2章
FizzBuzzを例題にRubyの知識を一通り説明する章のよう。

#### 2-2 Rubyに関する基礎知識

- すべてがオブジェクト  
  Rubyはオブジェクト指向言語なので、数値やnilも含めてすべてがオブジェクトになっている。  
  なので、数値やnil、falseやtrueに対してもメソッドを呼び出せる。
  ```ruby
  nil.to_s #=> ""
  true.to_s #=> "true"
  false.to_s #=> "false"
  #.to_sだと↑みたいになる
  ```
- メソッド呼び出し  
  メソッド呼び出しの差異の引数の()は省略することもできる。
  慣習的に  
  - 引数が一つもないとき
  - putsやpのようなグローバル関数っぽく使えるメソッドの時
  - requireやraiseのような、一見Rubyの予約語っぽく見えるメソッドの場合  

  は()が省略されることがおおい。  
  上記のケースに該当しないメソッド呼び出しの時は()がつくことが多い。  
  また、構文上()を絶対に省略できないケースもある。  
- 文の区切り  
  Rubyは基本的に改行が文の区切りになるので、;などを使って明示的に区切りを示す必要はない。  
  使用頻度は高くないが、一行に複数の分を入れたいときは;で文の区切りを明示的に指定することもある。  
  ```ruby
  def index; end
  #これがそうなのかな。
  ```
  文が続くことが明らかな時は、文の途中で改行できる。  
  \でも文がまだ続くことを明示的に示すことができるが、使用頻度は高くない。

- コメント  
  `=begin`と`=end`を使うと複数行コメントにすることもできるが、これらはコード中にRDoc呼ばれるドキュメントを埋め込むために用意されているので、実際にコメントを書く用途で使われることはめったにない。

- 識別子と予約語  
  識別子には半角英数字のほかにひらがな、漢字も使うことができるが、実際には半角英数字を使うことがほとんど。  
  他に、半角記号の`_、!、?、=`も特定の条件下でメソッド名として使うことができる。

- 空白文字  
  識別子や予約語を区切るために使う。  
  いくつつなげても違いはないが、次のように書いたほうがコードが読みやすく、思いがけないRubyの解釈ミスを避けられる。
  ```ruby
  (10 - 3) * 5
  def add(a, b)
    a + b
  end
  add(7, 3)

  # ↓スペースを空けて呼び出したら無効な構文になる例
  add (7, 3)
  ```

- リテラル  
  数値や文字列など、ソースコードに直接埋め込むことができる値のこと。

- 変数の宣言と代入  
  ローカル変数の場合、変数を宣言するだけの構文はない。インスタンス変数では動きが異なる。  
  変数名は習慣として小文字のスネークケースで各。キャメルケースはエラーにはならないが一般的ではないので、使わない。  
  アンダースコアで始まる変数名はあまり使われない。が、宣言するが使わないときはあえてアンダースコア始まりの変数名が使われるケースがある。  
  数字から始まる変数名はエラーになる。  
  Rubyの場合は、変数が特定の型に制限されることはないため、同じ変数に文字列や数値を自由に代入できるが、コードが理解しにくくなり、不具合の原因になり安野で、特別な理由がない限り避けた方がいい。  
  以下のような多重代入もできる
  ```ruby
  a, b = 3, 4
  a # => 3
  b # => 4
  ```
  メソッドが配列で複数の値を同時に返す場合などには便利だが、互いに無関係な複数の値を多重代入するのは、見通しの悪いコードを生み出す原因になるので、多重代入は適切な場面で使うようにした方がいい。  
  `=`を複数回使って2個以上の変数に同じ値を代入することもできる。  
  ```ruby
  a = b = 'Hello'
  a #=> 'Hello'
  b #=> 'Hello'
  
  a.upcase!
  # aだけを大文字にしたはずが、bも大文字になってしまう
  a #=> 'HELLO'
  b #=> 'HELLO'
  # こうした場合は別々に代入すればよい
  ```
