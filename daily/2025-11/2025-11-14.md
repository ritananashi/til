※スクール内timesの移植（2025/11/25）

画像付き投稿の編集、Rails7からはデフォが新しい画像に置き換えになっちゃってて、これを追加に変えたいけど`config.active_storage.replace_on_assign_to_many`はRails7.1で廃止されたんだよな～～～どうすっかな～～～って思ってたけど、ガイドよく読んだら`attach`使うと追加の挙動になるって書いてたから、やっぱ画像関係を別のStrong parameterに分割して`save`か`update`後に`attach`するようにすればええやん！になった。  
https://railsguides.jp/v7.2/upgrading_ruby_on_rails.html#active-storage%E3%81%AE%E4%BB%A3%E5%85%A5%E3%81%AE%E6%8C%AF%E3%82%8B%E8%88%9E%E3%81%84%E3%81%AE%E5%A4%89%E6%9B%B4  

画像枚数のバリデーションだけどういう動きになるか確認しないとね  

Rails7からのActiveStorageの、画像付き投稿を編集して新しい画像を添付したときの挙動がデフォルトで上書き（置き換え）になっているのですが、これを追加（既存の添付はそのまま残る）に変えたいな～～～と思って調べたりなどしてました。  
Rails7.1以前なら`config.active_storage.replace_on_assign_to_many`を`true`に設定するだけで追亜kに変更できたんですけど、Rails7.1以降これが削除されてしまっていたのでどないしよ…としていたのですが、Railsガイドを改めて読み直したら`attach`すれば追加の挙動になるみたいでした。  
そういえば未保存オブジェクトに`attach`できないかもしれない…ってやってた時に`save`後に`attahe`したら画像追加の挙動になってたのを今思い出しました。  
ということは、挙動を追加に変えたかったらStorong Patameterから`images`のみ分離して新しいStorong Parameterを作り、`save`や`update`後に`attache`すれば想定している挙動になるってことだな！と思ったので今度（明日）やります。  
枚数制限のバリデーションがどう動くのかの挙動を見ないとな。  

