※スクール内timesの移植（2025/11/25）

記事書いてたら本番環境でなんかエラーになってるの見つけたから直す。  
imeges_countが未定義？なんでだ？  
ローカルだとえらーはなし。  

images_countが作られてないぞ…？  
ありゃ、こないだのN+1対応したときに作ったcounter_cacheのカラムが全部ない。  
GitHub上の最新のdb/schema.rbには全部ある…  
GitHubActions上のCDもGreen  

新しいマイグレーションファイルが全部downになってる  
手動で`bin/rails db:migrate`をやってみる…  

最後に追加したレビューに添付されてる画像枚数を数えてimages_countカラムに反映させるマイグレーションファイルが重くてタイムアウトか何かになっていたみたい。  
このマイグレーションファイルを削除して、処理をスクリプトに切り出して解決！  

ローカルだとたいていの処理が軽いから、カラム作ったりindex貼る以外のマイグレーションファイルはなるべくつくらないようにしないとなあ。  
まあもうこういう処理をすることはたぶんないと…おもう…ないよね？  

インクに紐づいてるレビュー数と、メーカーに紐づいてるインク数は問題なくできてるから、`counter_cache`で普通に対応できる部分に関しては問題なさそうかな。  

たまにしかflyctlのコマンド叩かないから毎回忘れて毎回調べてる。  
